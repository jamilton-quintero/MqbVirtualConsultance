{
  "$schema": "https://railway.app/railway.schema.json",
  "stages": [
    {
      "name": "Setup",
      "commands": [
        "nix-env -iA nixpkgs.openjdk8",
        "nix-env -iA nixpkgs.gradle"
      ]
    },
    {
      "name": "Build",
      "commands": [
        "chmod +x gradlew",
        "./gradlew build -x check"
      ]
    },
    {
      "name": "Start",
      "commands": [
        "java $JAVA_OPTS -jar -Dserver.port=$PORT build/libs/*.jar"
      ]
    }
  ]
}
